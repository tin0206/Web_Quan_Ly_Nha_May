<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
    <script type="module" src="script.js" defer></script>
    <title>Quản Lý Nhà Máy - Factory Management</title>
  </head>
  <body>
    <!-- Top Navigation Bar -->
    <div class="topBar">
      <div class="nav-left">
        <i class="fa-solid fa-home"></i>
        <span>DashBoard</span>
      </div>
      <div class="nav-breadcrumb">
        <span>Lệnh Sản xuất</span>
        <span class="separator">></span>
        <span>MIP</span>
        <span class="separator">></span>
        <span>CS1</span>
      </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
      <!-- Header Section -->
      <div class="header-section">
        <div class="header-top">
          <button class="back-btn">
            <i class="fa-solid fa-arrow-left"></i>
          </button>
          <div class="header-title">
            <div class="header-top-left">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="#6259ee"
              >
                <path
                  d="M11.132 2.504l-4 7a1 1 0 0 0 .868 1.496h8a1 1 0 0 0 .868 -1.496l-4 -7a1 1 0 0 0 -1.736 0z"
                />
                <path
                  d="M17 13a4 4 0 1 1 -3.995 4.2l-.005 -.2l.005 -.2a4 4 0 0 1 3.995 -3.8z"
                />
                <path
                  d="M9 13h-4a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2z"
                />
              </svg>
              <div class="header-text">
                <h1>Giám sát lệnh sản xuất</h1>
                <p>Tổng quan thời gian thực về các đơn hàng sản xuất</p>
              </div>
            </div>
            <div class="badge-cs1">CS1</div>
          </div>
          <div>
            <button class="create-btn">
              <i class="fa-solid fa-plus"></i>
              Tạo Lệnh SX Mới
            </button>
          </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-header">
              <span>Tổng Lệnh SX (PO)</span>
              <div class="stat-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="#2a5fc0"
                >
                  <path
                    d="M11.132 2.504l-4 7a1 1 0 0 0 .868 1.496h8a1 1 0 0 0 .868 -1.496l-4 -7a1 1 0 0 0 -1.736 0z"
                  />
                  <path
                    d="M17 13a4 4 0 1 1 -3.995 4.2l-.005 -.2l.005 -.2a4 4 0 0 1 3.995 -3.8z"
                  />
                  <path
                    d="M9 13h-4a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2z"
                  />
                </svg>
              </div>
            </div>
            <div class="stat-number" id="kvsx-stat">6</div>
          </div>
          <div class="stat-card">
            <div class="stat-header">
              <span>Đang tiến hành</span>
              <div class="stat-icon" id="progress-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="#fe9d1e"
                >
                  <path
                    d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z"
                  />
                </svg>
              </div>
            </div>
            <div class="stat-number" id="total-po-stat">7</div>
          </div>
          <div class="stat-card">
            <div class="stat-header">
              <span>Hoàn thành</span>
              <div class="stat-icon" id="completed-icon">
                <i class="fa-solid fa-circle-check" style="color: #47b54d"></i>
              </div>
            </div>
            <div class="stat-number" id="in-progress-stat">2</div>
          </div>
          <div class="stat-card">
            <div class="stat-header">
              <span>Bị trễ</span>
              <div class="stat-icon" id="late-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="red"
                >
                  <path
                    d="M12 1.67c.955 0 1.845 .467 2.39 1.247l.105 .16l8.114 13.548a2.914 2.914 0 0 1 -2.307 4.363l-.195 .008h-16.225a2.914 2.914 0 0 1 -2.582 -4.2l.099 -.185l8.11 -13.538a2.914 2.914 0 0 1 2.491 -1.403zm.01 13.33l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -7a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z"
                  />
                </svg>
              </div>
            </div>
            <div class="stat-number" id="completed-stat">1</div>
          </div>
        </div>
      </div>

      <!-- Search and Filter Section -->
      <div class="search-section">
        <div class="search-bar">
          <i class="fa-solid fa-search"></i>
          <input type="text" placeholder="Tìm kiếm Lệnh SX, Mã sản phẩm..." />
        </div>
        <div class="view-controls">
          <button class="view-btn active" title="Danh sách">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M4 6l16 0" />
              <path d="M4 12l16 0" />
              <path d="M4 18l16 0" />
            </svg>
          </button>
          <button class="view-btn" title="Lưới">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path
                d="M9 3a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-4a2 2 0 0 1 -2 -2v-4a2 2 0 0 1 2 -2z"
              />
              <path
                d="M19 3a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-4a2 2 0 0 1 -2 -2v-4a2 2 0 0 1 2 -2z"
              />
              <path
                d="M9 13a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-4a2 2 0 0 1 -2 -2v-4a2 2 0 0 1 2 -2z"
              />
              <path
                d="M19 13a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-4a2 2 0 0 1 -2 -2v-4a2 2 0 0 1 2 -2z"
              />
            </svg>
          </button>
          <hr style="height: 30px; width: 2px" />
          <button class="refresh-btn">
            <i class="fa-solid fa-rotate-right"></i>
            Làm mới
          </button>
        </div>
      </div>

      <!-- Table Section -->
      <div class="table-section">
        <table class="data-table">
          <thead>
            <tr>
              <th>Mã Lệnh SX</th>
              <th>Sản Phẩm</th>
              <th style="text-align: center">Dây chuyền</th>
              <th>Công thức</th>
              <th>Lô SX</th>
              <th style="text-align: center">Ngày Bắt Đầu</th>
              <th style="text-align: center">Số Lượng</th>
              <th style="text-align: center">Tiến độ</th>
              <th style="text-align: center">Trạng Thái</th>
              <th style="text-align: center">Thao Tác</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rows will be rendered by JavaScript -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- View Production Order Modal -->
    <div id="viewModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Chi tiết Lệnh Sản Xuất</h2>
          <button class="modal-close" data-close="viewModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="modal-grid">
            <div class="modal-field">
              <label>Mã Lệnh SX</label>
              <p id="viewOrderNumber">-</p>
            </div>
            <div class="modal-field">
              <label>Mã Sản Phẩm</label>
              <p id="viewProductCode">-</p>
            </div>
            <div class="modal-field">
              <label>Dây chuyền</label>
              <p id="viewProductionLine">-</p>
            </div>
            <div class="modal-field">
              <label>Công thức</label>
              <p id="viewRecipeCode">-</p>
            </div>
            <div class="modal-field">
              <label>Phiên bản Công thức</label>
              <p id="viewRecipeVersion">-</p>
            </div>
            <div class="modal-field">
              <label>Lô SX</label>
              <p id="viewLotNumber">-</p>
            </div>
            <div class="modal-field">
              <label>Số lượng</label>
              <p id="viewQuantity">-</p>
            </div>
            <div class="modal-field">
              <label>Đơn vị</label>
              <p id="viewUnitOfMeasurement">-</p>
            </div>
            <div class="modal-field">
              <label>Ngày bắt đầu</label>
              <p id="viewPlannedStart">-</p>
            </div>
            <div class="modal-field">
              <label>Ngày kết thúc</label>
              <p id="viewPlannedEnd">-</p>
            </div>
            <div class="modal-field">
              <label>Ca làm</label>
              <p id="viewShift">-</p>
            </div>
            <div class="modal-field">
              <label>Tiến độ</label>
              <p id="viewProgress">-</p>
            </div>
            <div class="modal-field">
              <label>Trạng thái</label>
              <p id="viewStatus">-</p>
            </div>
            <div class="modal-field">
              <label>Process Area</label>
              <p id="viewPlant">-</p>
            </div>
            <div class="modal-field">
              <label>Shop Floor</label>
              <p id="viewShopfloor">-</p>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close="viewModal">Đóng</button>
        </div>
      </div>
    </div>

    <!-- Edit Production Order Modal -->
    <div id="editModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Chỉnh sửa Lệnh Sản Xuất</h2>
          <button class="modal-close" data-close="editModal">&times;</button>
        </div>
        <div class="modal-body">
          <form id="editForm" class="modal-form">
            <div class="form-group">
              <label>Mã Lệnh SX</label>
              <input type="text" id="editOrderNumber" readonly />
            </div>
            <div class="form-group">
              <label>Mã Sản Phẩm</label>
              <input type="text" id="editProductCode" />
            </div>
            <div class="form-group">
              <label>Dây chuyền</label>
              <input type="text" id="editProductionLine" />
            </div>
            <div class="form-group">
              <label>Công thức</label>
              <input type="text" id="editRecipeCode" />
            </div>
            <div class="form-group">
              <label>Phiên bản Công thức</label>
              <input type="text" id="editRecipeVersion" />
            </div>
            <div class="form-group">
              <label>Lô SX</label>
              <input type="text" id="editLotNumber" />
            </div>
            <div class="form-group">
              <label>Số lượng</label>
              <input type="number" id="editQuantity" />
            </div>
            <div class="form-group">
              <label>Đơn vị</label>
              <input type="text" id="editUnitOfMeasurement" />
            </div>
            <div class="form-group">
              <label>Ngày bắt đầu</label>
              <input type="datetime-local" id="editPlannedStart" />
            </div>
            <div class="form-group">
              <label>Ngày kết thúc</label>
              <input type="datetime-local" id="editPlannedEnd" />
            </div>
            <div class="form-group">
              <label>Ca làm</label>
              <input type="number" id="editShift" min="1" />
            </div>
            <div class="form-group">
              <label>Tiến độ (%)</label>
              <input type="number" id="editProgress" min="0" max="100" />
            </div>
            <div class="form-group">
              <label>Trạng thái</label>
              <select id="editStatus">
                <option value="pending">Chờ</option>
                <option value="running">Chạy</option>
                <option value="stop">Dừng</option>
                <option value="cancelled">Hủy</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close="editModal">Hủy</button>
          <button class="btn-primary" id="saveEditBtn">Lưu Thay đổi</button>
        </div>
      </div>
    </div>

    <!-- Confirm Edit Modal -->
    <div id="confirmEditModal" class="modal">
      <div class="modal-content modal-confirm">
        <div class="modal-header">
          <h2>Xác nhận Chỉnh sửa</h2>
          <button class="modal-close" data-close="confirmEditModal">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <p>Bạn có chắc chắn muốn lưu các thay đổi này không?</p>
          <p style="font-size: 12px; color: #666; margin-top: 8px">
            Những thay đổi sẽ được cập nhật vào hệ thống.
          </p>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close="confirmEditModal">
            Hủy
          </button>
          <button class="btn-primary" id="confirmSaveBtn">Xác nhận</button>
        </div>
      </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div id="confirmDeleteModal" class="modal">
      <div class="modal-content modal-confirm">
        <div class="modal-header">
          <h2>Xác nhận Xóa</h2>
          <button class="modal-close" data-close="confirmDeleteModal">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <p>
            Bạn muốn xóa lệnh sản xuất
            <strong id="deleteOrderName">-</strong> này chứ?
          </p>
          <p style="font-size: 12px; color: #e53935; margin-top: 8px">
            Hành động này không thể hoàn tác.
          </p>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close="confirmDeleteModal">
            Hủy
          </button>
          <button class="btn-danger" id="confirmDeleteBtn">Xóa</button>
        </div>
      </div>
    </div>

    <!-- Create Production Order Modal -->
    <div id="createModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Tạo Lệnh Sản Xuất Mới</h2>
          <button class="modal-close" data-close="createModal">&times;</button>
        </div>
        <div class="modal-body">
          <form id="createForm" class="modal-form">
            <div class="form-group">
              <label>Mã Lệnh SX</label>
              <input
                type="text"
                id="createOrderNumber"
                placeholder="Auto-generated"
              />
            </div>
            <div class="form-group">
              <label>Mã Sản Phẩm</label>
              <input type="text" id="createProductCode" required />
            </div>
            <div class="form-group">
              <label>Dây chuyền</label>
              <input type="text" id="createProductionLine" required />
            </div>
            <div class="form-group">
              <label>Công thức</label>
              <input type="text" id="createRecipeCode" required />
            </div>
            <div class="form-group">
              <label>Phiên bản Công thức</label>
              <input type="text" id="createRecipeVersion" />
            </div>
            <div class="form-group">
              <label>Lô SX</label>
              <input type="text" id="createLotNumber" />
            </div>
            <div class="form-group">
              <label>Số lượng</label>
              <input type="number" id="createQuantity" required />
            </div>
            <div class="form-group">
              <label>Đơn vị</label>
              <input type="text" id="createUnitOfMeasurement" />
            </div>
            <div class="form-group">
              <label>Ngày bắt đầu</label>
              <input type="datetime-local" id="createPlannedStart" required />
            </div>
            <div class="form-group">
              <label>Ngày kết thúc</label>
              <input type="datetime-local" id="createPlannedEnd" />
            </div>
            <div class="form-group">
              <label>Ca làm</label>
              <input type="number" id="createShift" min="1" />
            </div>
            <div class="form-group">
              <label>Process Area</label>
              <input type="text" id="createPlant" />
            </div>
            <div class="form-group">
              <label>Shop Floor</label>
              <input type="text" id="createShopfloor" />
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close="createModal">Hủy</button>
          <button class="btn-primary" id="createSubmitBtn">Tạo Lệnh SX</button>
        </div>
      </div>
    </div>
  </body>
</html>
